WEBVTT

1
00:00:14.592 --> 00:00:15.360
Hello

2
00:00:15.616 --> 00:00:17.408
Welcome back to cucumber School

3
00:00:17.920 --> 00:00:23.552
And the last lesson we saw how easily incidental details can creep into your scenarios

4
00:00:23.808 --> 00:00:25.600
Tilt about why there a problem

5
00:00:26.112 --> 00:00:29.696
I showed you some techniques from massaging them back out again

6
00:00:30.720 --> 00:00:31.488
But

7
00:00:32.000 --> 00:00:34.560
As we push the details out about scenarios

8
00:00:34.816 --> 00:00:37.632
We need to step definition code more complicated

9
00:00:38.400 --> 00:00:41.472
The promise to show you how to deal with that extra complexity

10
00:00:41.984 --> 00:00:43.776
And that's what we'll do in this episode

11
00:00:44.800 --> 00:00:45.568
First time

12
00:00:45.824 --> 00:00:51.968
Let's look at how we could have prevented the Premium Accounts feature from getting into such a mess

13
00:00:52.224 --> 00:00:53.504
In the first place

14
00:00:56.064 --> 00:00:59.904
Unless someone we showed you an example of The Three Amigos

15
00:01:00.160 --> 00:01:01.184
Testa

16
00:01:01.440 --> 00:01:03.744
Developer and product owner

17
00:01:04.256 --> 00:01:07.072
Having a conversation about the new user story

18
00:01:08.096 --> 00:01:10.912
What's the purpose of this conversation

19
00:01:12.448 --> 00:01:18.592
Is software projects it's often the unknown unknowns that can make the biggest difference between

20
00:01:18.848 --> 00:01:19.872
Success and failure

21
00:01:20.640 --> 00:01:26.784
DDD we always try to assume we're ignorant of some important information

22
00:01:27.296 --> 00:01:29.856
And try to deliberately discover

23
00:01:30.624 --> 00:01:36.000
That was unknown unknowns as early as possible so they don't surprises later on

24
00:01:37.024 --> 00:01:38.816
That's what the Three Amigos

25
00:01:39.072 --> 00:01:40.352
It's all about

26
00:01:41.120 --> 00:01:47.008
Nobody likes long meetings so we've developed a simple framework for this conversation that keeps it quick and effective

27
00:01:47.776 --> 00:01:50.336
The coldest example mapping

28
00:01:51.360 --> 00:01:53.920
Don't need a multicolor pack of index cards

29
00:01:54.432 --> 00:01:55.712
And some pens

30
00:01:56.992 --> 00:02:02.624
Will use the different color cards to represent the different kinds of information that's a rise in the conversation

31
00:02:03.392 --> 00:02:05.184
We can start with the easy stuff

32
00:02:05.952 --> 00:02:09.280
Take a yellow card and write down the name of the story

33
00:02:11.584 --> 00:02:12.096
Now

34
00:02:12.608 --> 00:02:16.960
Do we already know any rules or acceptance criteria about this story

35
00:02:17.984 --> 00:02:21.312
Write each rule down on a blue card

36
00:02:23.616 --> 00:02:25.408
They look pretty straightforward

37
00:02:25.920 --> 00:02:29.504
Let's explore them a bit by coming up with some examples

38
00:02:30.528 --> 00:02:36.160
Down in the developer comes up with a simple scenario to check he understands the basics of the by rule

39
00:02:37.440 --> 00:02:38.976
I stopped at end credits

40
00:02:39.488 --> 00:02:41.792
I shout by my muffins

41
00:02:42.048 --> 00:02:43.072
And then

42
00:02:43.328 --> 00:02:45.120
I want to buy some socks

43
00:02:45.376 --> 00:02:47.168
And then I have zero credits

44
00:02:47.680 --> 00:02:48.192
Correct

45
00:02:49.472 --> 00:02:51.008
Yes cipolla

46
00:02:51.520 --> 00:02:53.824
Darn Rice's example up on a green card

47
00:02:54.080 --> 00:02:57.408
And places it underneath the rule that illustrates

48
00:02:58.944 --> 00:03:00.480
Tell me the test of chimes in

49
00:03:01.504 --> 00:03:07.648
How about the one where you shout to word that contains by like fire for example

50
00:03:08.416 --> 00:03:11.744
If you want to shout I need a buyer for my house

51
00:03:12.000 --> 00:03:13.536
Without lose credits to

52
00:03:15.072 --> 00:03:21.216
Pull it stinks about this for a minute besides that no I don't need a whole wood by Kountze Texas

53
00:03:21.472 --> 00:03:22.240
The new rule

54
00:03:23.008 --> 00:03:27.616
They write that up on the rule card and placed example caught underneath it

55
00:03:30.432 --> 00:03:31.456
Darn asks

56
00:03:31.968 --> 00:03:36.832
How to use this get these credits are we building up functionalities part of the Story 2

57
00:03:38.112 --> 00:03:43.744
Hotels in that part of another story and they can assume you use it already can purchase credits

58
00:03:44.768 --> 00:03:46.560
They write that down as a rule to

59
00:03:48.352 --> 00:03:54.496
This isn't a behavioral it's a rule about the scope of the story but it's still useful to write it down since we've agreed on it

60
00:03:55.776 --> 00:03:57.312
What is an examples

61
00:03:59.104 --> 00:04:02.176
Still focused on the by rule tell me asks

62
00:04:02.432 --> 00:04:04.224
What's your favorite after credit

63
00:04:04.736 --> 00:04:09.088
So you start with 10 credits and Shout by three times was the outcome

64
00:04:10.368 --> 00:04:11.392
Pulling looks puzzled

65
00:04:12.416 --> 00:04:13.952
I don't know she says

66
00:04:14.208 --> 00:04:16.000
I need to give that some thought

67
00:04:17.024 --> 00:04:18.559
Darren takes a red card

68
00:04:18.815 --> 00:04:20.863
And writes this up as a question

69
00:04:23.423 --> 00:04:29.567
They play the same technique to the other rule about long messages I'm pretty soon the table is covered in cars reflect

70
00:04:29.823 --> 00:04:34.687
Watching the rules examples on questions that have come up in that conversation

71
00:04:35.199 --> 00:04:39.551
Now to have a picture in front of them that reflect back will they know

72
00:04:39.807 --> 00:04:41.343
And still don't know

73
00:04:41.599 --> 00:04:42.879
About the story

74
00:04:47.487 --> 00:04:53.631
The apparent purpose of the Three Amigos is to take a user story together with its acceptance crotch

75
00:04:53.887 --> 00:04:58.751
Ontario business rules and produce examples that illustrate the behavior

76
00:05:00.031 --> 00:05:05.151
Many people think they need to produce full McGuckin scenarios from The Three Amigos conversations

77
00:05:05.407 --> 00:05:08.479
But in our experience that's only occasionally necessary

78
00:05:08.735 --> 00:05:11.807
In fact they can often slow the discussion down

79
00:05:13.343 --> 00:05:19.487
As you've seen an example mapping session should go right across the breadth of the story trying to get complete

80
00:05:19.743 --> 00:05:20.767
Picture of the behavior

81
00:05:21.535 --> 00:05:23.583
Next time you come up with an example

82
00:05:23.839 --> 00:05:26.655
Try to understand what the underlying rules

83
00:05:27.423 --> 00:05:30.239
If you discover a scenario that doesn't fit your rules

84
00:05:30.495 --> 00:05:32.799
You need to reconsider your rules

85
00:05:33.567 --> 00:05:38.687
And this way the acceptance criteria for the story are refined by the group

86
00:05:39.711 --> 00:05:44.831
Although there's no doubt of the power of examples for exploring and toking three requirements

87
00:05:45.087 --> 00:05:47.135
It's the rules will go into the code

88
00:05:47.903 --> 00:05:49.695
If you understand the rules

89
00:05:49.951 --> 00:05:52.511
You'll be able to build an elegant solution

90
00:05:54.559 --> 00:05:58.911
Sometimes you'll come across questions that nobody in the group can answer

91
00:05:59.679 --> 00:06:03.007
Instead of getting stuck trying to come up with an answer

92
00:06:03.263 --> 00:06:05.055
Just write down the question

93
00:06:05.823 --> 00:06:10.175
Congratulations you just turned unknown unknown

94
00:06:10.431 --> 00:06:12.479
Into a Known Unknown

95
00:06:13.247 --> 00:06:14.783
That's progress

96
00:06:18.111 --> 00:06:20.159
Deciding what the story is not

97
00:06:20.671 --> 00:06:23.487
Maximizing the amount of work not done

98
00:06:23.743 --> 00:06:27.327
It's one of the most useful things you can do in a three Amigo session

99
00:06:28.095 --> 00:06:32.191
Small stories at the secret of a successful agile team

100
00:06:33.727 --> 00:06:36.031
I told him through the details of the behavior

101
00:06:36.287 --> 00:06:41.919
Ensure that the tester developing product owner increment about what needs to be built

102
00:06:42.431 --> 00:06:44.991
Shadow understanding emerges between them

103
00:06:46.015 --> 00:06:49.087
They also got a little more about one another's perspective

104
00:06:49.599 --> 00:06:53.951
Some people tell us the Three Amigos is help to build empathy within that team

105
00:06:55.999 --> 00:07:02.143
With this goal in mind make sure the Three Amigos isn't just a rubber-stamping exercise y 1 /

106
00:07:02.399 --> 00:07:03.679
Does all the talking

107
00:07:04.447 --> 00:07:10.335
Notice how we not example everyone in the group was asking questions and writing you cards

108
00:07:11.615 --> 00:07:16.479
One last tip is to run your Three Amigos sessions inside a time box

109
00:07:16.991 --> 00:07:21.599
When your practice that's it you should be able to analyze the story within 25 minutes

110
00:07:21.855 --> 00:07:23.391
If you can't

111
00:07:23.647 --> 00:07:25.183
It's either too big

112
00:07:25.439 --> 00:07:27.743
We don't understand it well enough yet

113
00:07:28.511 --> 00:07:31.327
Either way it's not ready to play

114
00:07:32.863 --> 00:07:38.239
At the end of the 25 minutes you can check with everyone thinks the store is ready to start work on

115
00:07:38.751 --> 00:07:42.079
Has lots of questions remain it will be risky to start work

116
00:07:42.335 --> 00:07:47.199
The people might be comfortable taking on the story with only a few minor questions to clear up

117
00:07:47.967 --> 00:07:50.783
Check this with a quick thumb vote

118
00:07:53.343 --> 00:07:57.695
When we build software we're always working across two domains

119
00:07:58.463 --> 00:08:00.255
Does the problem demain

120
00:08:00.511 --> 00:08:03.327
What are customers and business stakeholders live

121
00:08:04.607 --> 00:08:06.911
And as a solution to mean

122
00:08:07.167 --> 00:08:10.495
But we sold those business problems using technology

123
00:08:12.031 --> 00:08:14.079
Each domain has its own jog on

124
00:08:14.335 --> 00:08:15.615
It's on dialect

125
00:08:16.383 --> 00:08:17.407
That's fine

126
00:08:17.663 --> 00:08:20.991
Specialized language helps to main expose to communicate

127
00:08:21.759 --> 00:08:27.903
Off to know this jog on can prevent us from understanding one another across the two domains

128
00:08:29.183 --> 00:08:34.559
Ispeedy practitioners with focused on trying to grow this error in the middle

129
00:08:35.071 --> 00:08:38.399
Why we have a common will ubiquitous language

130
00:08:39.423 --> 00:08:42.751
We know that the bigger the shed vocabulary is

131
00:08:43.007 --> 00:08:49.151
The quicker the team can communicate ideas between the business and technology facing sides of the team

132
00:08:50.687 --> 00:08:52.223
We've also had it said

133
00:08:52.479 --> 00:08:54.527
But if you model the problem well enough

134
00:08:54.783 --> 00:08:57.599
The solution will take care of itself

135
00:08:59.391 --> 00:09:03.743
Certainly we believe that the better understanding you have the problem to mine

136
00:09:03.999 --> 00:09:06.303
The best resolution you can build

137
00:09:07.071 --> 00:09:09.119
That's why cucumber so powerful

138
00:09:09.631 --> 00:09:12.703
Because it helps you to stay rooted in the public domain

139
00:09:15.007 --> 00:09:17.823
So why do you feed your file sit on this diagram

140
00:09:18.591 --> 00:09:21.663
Well we hope to sit right in the middle here

141
00:09:21.919 --> 00:09:25.247
Back to the place where the problem and solution two minds come together

142
00:09:26.271 --> 00:09:31.135
Someone from either to me should be able to read a feature file and it will make sense to them

143
00:09:32.671 --> 00:09:34.719
And how about step definitions

144
00:09:35.487 --> 00:09:41.631
Stop definitions of right on the boundary here translating between the problem the main language we use it all girl cancel

145
00:09:41.887 --> 00:09:42.399
Mario's

146
00:09:42.911 --> 00:09:47.263
On the concrete actions were taken code to plump over his eye solution

147
00:09:48.799 --> 00:09:54.943
We want to prevent solution to main Concepts and language from leaking into a Gilligan scenarios so that we keep them readable

148
00:09:55.967 --> 00:10:00.319
I saw in the last lesson when we remove details from cenarios

149
00:10:00.575 --> 00:10:04.159
The trade-off for increased complexity and ISTEP definition

150
00:10:05.695 --> 00:10:07.743
So how do we manage this complexity

151
00:10:09.535 --> 00:10:15.679
Amateur cucumber test we will have a layer of support code sitting between the step definitions

152
00:10:15.935 --> 00:10:17.471
The system being automated

153
00:10:18.239 --> 00:10:24.383
This layer of support code literally supposed to step definitions by providing an API

154
00:10:24.639 --> 00:10:25.919
Automating replication

155
00:10:26.687 --> 00:10:29.759
We can extract this API for my step definitions

156
00:10:30.527 --> 00:10:33.855
Let's pick up a Sheltie codebase I'll show you what we mean

157
00:10:34.367 --> 00:10:36.671
We need a new plastic container support code

158
00:10:37.183 --> 00:10:39.743
That's great classical child support

159
00:10:39.999 --> 00:10:42.559
And the same packages ISTEP definitions

160
00:10:42.815 --> 00:10:45.631
We already have a shout method in a step definition class

161
00:10:45.887 --> 00:10:49.215
Escape method and paste it into the support class

162
00:10:51.007 --> 00:10:52.287
Will make it public

163
00:10:52.543 --> 00:10:55.103
And renamed it to Sean Shout

164
00:10:56.639 --> 00:10:58.687
We also need to take Maps

165
00:10:58.943 --> 00:11:01.503
People on messages Shattered by

166
00:11:02.271 --> 00:11:07.135
Let's cut and paste those as well when it's done set these Maps weather declared

167
00:11:07.391 --> 00:11:09.439
A decline in public and Final

168
00:11:12.767 --> 00:11:17.375
Now that we have a new shout support class let's put it to use and ISTEP definitions

169
00:11:17.887 --> 00:11:22.495
Whitaker construction deposit in-store the reference in a child support field

170
00:11:22.751 --> 00:11:26.079
I call this method everywhere we used to call Shout

171
00:11:28.639 --> 00:11:33.503
Since hotmaps now moved we need to access station to shout support object as well

172
00:11:36.319 --> 00:11:41.695
Cucumber now fails with an era complaining that the step that's class does not have an empty Constructor

173
00:11:43.231 --> 00:11:49.375
You may not giving it much thought the Cucumber create a new instance of every class with step definitions before everything

174
00:11:49.631 --> 00:11:50.143
Scenario

175
00:11:51.423 --> 00:11:54.751
Cucumber knows how to instantiate classes with empty Constructors

176
00:11:55.519 --> 00:12:01.663
When the class is expect dependency to be passed in cucumber days to delegate the instantiation

177
00:12:01.919 --> 00:12:04.991
Objects to a dependency injection container

178
00:12:06.271 --> 00:12:12.415
Cucumber supports half-a-dozen dependency-injection containers let's pick a simple one that doesn't require any

179
00:12:12.671 --> 00:12:13.695
Configuration

180
00:12:14.463 --> 00:12:15.743
Peacock container

181
00:12:19.839 --> 00:12:24.959
Now the Cucumber successfully instantiated objects let's finish our refactoring

182
00:12:25.727 --> 00:12:29.055
Will know it done when all the scenarios a green again

183
00:12:32.127 --> 00:12:36.735
We could continue to move code for my step definitions into the support code like this

184
00:12:37.247 --> 00:12:42.111
For example we could rise support method for generating messages of a certain length

185
00:12:43.391 --> 00:12:49.279
Ideally each step definition should only contain one or two lines that delegate to your support code

186
00:12:50.047 --> 00:12:56.191
When you follow this principle is that definitions become a translation laugh from plain language into code

187
00:12:57.215 --> 00:13:02.079
Batcave in the vocabulary consistent As you move across the problem solution boundary

188
00:13:02.335 --> 00:13:06.175
You start to allow the scenarios to dry the design of your Domain model

189
00:13:06.943 --> 00:13:10.271
This is what we call modeling by example

190
00:13:12.319 --> 00:13:16.671
And this way we create our API automating our application

191
00:13:17.439 --> 00:13:23.583
At this API grows if it comes easy and easier to write a new Step definitions because the actions you need

192
00:13:23.839 --> 00:13:26.911
Need to take are already defined on the API

193
00:13:28.447 --> 00:13:34.591
It might seem like over engineering but a little shout out application but you'll be surprised how quickly these tests

194
00:13:34.847 --> 00:13:35.615
Sweet scrub

195
00:13:36.127 --> 00:13:42.271
Taking time to stump out complexity early and organize your code to create a good support API

196
00:13:42.527 --> 00:13:44.575
Is a great investment for the future

197
00:13:45.343 --> 00:13:51.487
In a future lesson will show you how a well-crafted automation IPI I miss that you plug

198
00:13:51.743 --> 00:13:56.095
Tokyo cenario's into the system at different levels such as a web front-end

199
00:13:57.375 --> 00:14:01.727
The other investment we showed you about in this episode is the Three Amigos conversation

200
00:14:02.239 --> 00:14:08.383
Taking a little time to explore you use a story in a collaborative setting before you start to code it

201
00:14:08.895 --> 00:14:12.735
Could save an enormous amount of time and effort down the line

202
00:14:13.503 --> 00:14:19.647
Funny mistaken assumptions and misunderstandings customers nothing when you just pushing pieces of cod around

203
00:14:19.903 --> 00:14:20.415
The table

204
00:14:21.439 --> 00:14:23.231
As my grandma used to say

205
00:14:23.487 --> 00:14:26.559
Stitch in time saves nine

206
00:14:27.327 --> 00:14:31.423
And I feel like I've ever had to have these Three Amigos paintings for every story

207
00:14:31.679 --> 00:14:37.823
We think you'll be surprised how much you can discover from just that 25 minute conversation

208
00:14:38.847 --> 00:14:40.127
Give it a try

209
00:14:41.151 --> 00:14:42.943
And I'll see you next time

210
00:14:43.199 --> 00:14:44.735
On cucumber School
