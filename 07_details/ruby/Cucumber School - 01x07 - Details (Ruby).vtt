WEBVTT

1
00:00:14.080 --> 00:00:16.640
Hi there welcome back to cucumber School

2
00:00:17.152 --> 00:00:23.296
In the last lesson we took a break from the code to sharpen up your skills with cucumbers command line interface

3
00:00:23.552 --> 00:00:29.696
Now it's time to die right back into the code we going to explore one of the hottest topics that teams come across when they

4
00:00:29.952 --> 00:00:32.256
Stop to get to grips with cucumber and bdd

5
00:00:32.768 --> 00:00:36.096
How much detail to use in your scenarios

6
00:00:36.864 --> 00:00:39.424
Many teams find it easily agree on this

7
00:00:39.936 --> 00:00:42.752
I can often seem like a matter of personal preference

8
00:00:43.264 --> 00:00:49.408
Is true there are no right and wrong answers but we going to teach you some principles that you can apply to help you make

9
00:00:49.664 --> 00:00:55.296
Make better decisions once again while we were away the developers of Shouty of been busy

10
00:00:55.808 --> 00:01:01.952
I knew Hotshot ninja Rockstar subcontractor Stevie has built a new feature called

11
00:01:02.208 --> 00:01:05.536
Premium Accounts we don't know much about it yet

12
00:01:05.792 --> 00:01:11.680
Tessa Thompson has reported a bug from manual testing and it's up to us to fix it

13
00:01:12.704 --> 00:01:16.800
Times in his health Lee documented the bug has a failing scenario

14
00:01:17.312 --> 00:01:18.592
Heritage

15
00:01:22.432 --> 00:01:26.784
So let's try and figure out what this is all about

16
00:01:27.296 --> 00:01:33.184
Sean starts out with some credits presumably that's what gives him premium status

17
00:01:33.440 --> 00:01:38.304
As a result of that shout he's obviously supposed to have some credits deducted

18
00:01:38.816 --> 00:01:44.960
Thomson scenario says that the correct Behavior stuff for 5 credits to be deducted

19
00:01:45.216 --> 00:01:47.776
Leaving him with 25 credits

20
00:01:48.032 --> 00:01:53.152
As we can see from running the test the system is deducting 15 credits instead

21
00:01:53.664 --> 00:01:55.456
I wonder why

22
00:01:56.736 --> 00:01:58.272
Let's read the whole feature

23
00:01:58.528 --> 00:02:01.600
I should tell us some more about how the system is supposed to behave

24
00:02:03.392 --> 00:02:04.672
Oh my

25
00:02:04.928 --> 00:02:06.720
This is very difficult to read

26
00:02:08.000 --> 00:02:14.144
Sometimes it's bug report scenario at the bottom there's only one scenario and it's long

27
00:02:14.912 --> 00:02:20.032
I think I can count 12 steps altogether excluding the background steps

28
00:02:20.544 --> 00:02:23.104
The scenario several when steps

29
00:02:23.616 --> 00:02:28.736
Which is often a sign that the scenario was trying to test more than one business rule is a Time

30
00:02:30.016 --> 00:02:33.856
We normally like to document the business rules at the top of the feature file

31
00:02:34.624 --> 00:02:38.976
That description sections left blank so haven't been left any clues that

32
00:02:39.744 --> 00:02:43.072
Let's see if we can clean the rules from the scenario

33
00:02:44.096 --> 00:02:48.448
Sean starts out with 30 credits and ends up with 11

34
00:02:48.960 --> 00:02:50.240
But why

35
00:02:51.520 --> 00:02:55.616
A summers detail here I wonder which pets are important

36
00:02:56.640 --> 00:03:02.272
Could it be the number of word shouts it affect his credit or the number of messages

37
00:03:03.296 --> 00:03:08.416
FaceTime times in test case maybe that would buy isn't pulling really hard to tell

38
00:03:09.440 --> 00:03:15.584
It's interesting that Lucy has all Sean's messages even these ones which looked to be over a hundred 90 car

39
00:03:15.840 --> 00:03:17.888
I would normally be blocked

40
00:03:18.912 --> 00:03:24.800
Premium Accounts get to send messages over a hundred Knights characters in exchange for credits

41
00:03:25.568 --> 00:03:26.592
Well

42
00:03:27.360 --> 00:03:30.944
The face is pretty useless as documentation of the behavior

43
00:03:32.224 --> 00:03:38.368
It's no wonder there's a bug if this feature file reflects off teams current understanding a premium account Behavior

44
00:03:38.624 --> 00:03:40.928
I don't think we understand it very well

45
00:03:42.976 --> 00:03:45.024
Let's try reading the code instead

46
00:03:46.816 --> 00:03:52.960
Okay so we have a deduct credits Method Hair that seems to encapsulate the rules

47
00:03:53.728 --> 00:03:58.592
It looks like over long messages messages that are not short enough

48
00:03:59.104 --> 00:04:01.152
Cost to credits

49
00:04:01.408 --> 00:04:05.248
Needs time to advise mention we deduct 5 credits

50
00:04:05.760 --> 00:04:08.320
What's a good job we know how to read code

51
00:04:09.600 --> 00:04:15.744
What are the promises of payday is that our feature files become the single source of Truth for the whole team

52
00:04:16.256 --> 00:04:22.399
Yet here the scenario just such a poor job of documenting what the system does we have to go hunting for the truth

53
00:04:22.655 --> 00:04:23.423
In the code

54
00:04:23.935 --> 00:04:30.079
That's fine for us because we know how to read code but it's excluded anyone on our team

55
00:04:30.335 --> 00:04:31.359
Who is technical

56
00:04:31.615 --> 00:04:35.711
How would they be able to understand the behavior of Premium Accounts at the moment

57
00:04:36.991 --> 00:04:39.039
We need to fix this feature file

58
00:04:39.551 --> 00:04:44.415
It seems like a good time to ask out the main Express or clarification about this Behavior

59
00:04:45.183 --> 00:04:48.255
Idalia Three Amigos meeting would have done this already

60
00:04:48.511 --> 00:04:51.327
The things don't always go according to the script

61
00:04:51.839 --> 00:04:53.887
Visit to a product owner

62
00:04:55.679 --> 00:04:59.775
Pulling the product on it tells us the rules are as follows

63
00:05:00.543 --> 00:05:04.383
Mention the word by Annalise 5 credits

64
00:05:05.151 --> 00:05:08.223
Long messages cost to credits

65
00:05:08.735 --> 00:05:10.783
Okay well I hope this is a great deal

66
00:05:11.295 --> 00:05:15.135
But it said I was still doing a poor job of illustrating those rules

67
00:05:15.903 --> 00:05:18.463
The second moment to understand why

68
00:05:21.535 --> 00:05:24.607
It's all about the details

69
00:05:25.119 --> 00:05:27.679
When you first exploring a new Domaine problem

70
00:05:27.935 --> 00:05:34.079
Details like the exact messages people of shouted are a great way to shine light into

71
00:05:34.335 --> 00:05:36.639
The dark corners of your ignorance

72
00:05:37.151 --> 00:05:40.991
I bring examples to Life by making them Vivid and real

73
00:05:42.015 --> 00:05:46.111
This encourages what creative people call Divergent thinking

74
00:05:46.367 --> 00:05:49.439
Which helps you discover even more examples

75
00:05:49.951 --> 00:05:53.023
As you explore the behavior you need to provide

76
00:05:54.047 --> 00:05:58.143
Tempe today we call this deliberate discovery

77
00:05:58.399 --> 00:06:02.239
Let me try to explore the problem to mine as thoroughly as we can

78
00:06:03.007 --> 00:06:05.311
Details are good hair

79
00:06:06.847 --> 00:06:08.383
At some point however

80
00:06:08.639 --> 00:06:10.687
We need to write a computer program

81
00:06:11.199 --> 00:06:17.343
Enough time comes we need to switch to convergent thinking and try to distill down

82
00:06:17.599 --> 00:06:23.487
Well that detail the essence of the behavior

83
00:06:24.511 --> 00:06:30.399
Now too much detail can be distracting misleading to a future readers

84
00:06:31.167 --> 00:06:34.751
We hold these incidental details

85
00:06:36.031 --> 00:06:42.175
Let's try to distill the essence of this scenario by removing the incidental details

86
00:06:43.199 --> 00:06:44.991
We can start with this step

87
00:06:45.247 --> 00:06:48.319
When Sean shouts coming by a coffee

88
00:06:49.599 --> 00:06:53.951
What's important here is that the shout contains the word Buy

89
00:06:54.463 --> 00:06:55.999
So that's right.

90
00:06:59.071 --> 00:07:00.863
Better

91
00:07:01.119 --> 00:07:04.703
We still have a little bit of detail the word Buy

92
00:07:04.959 --> 00:07:06.495
That's quite important

93
00:07:06.751 --> 00:07:10.079
I thought it helps to illustrate how business rule

94
00:07:11.615 --> 00:07:14.431
Will need a new Step definition for this of course

95
00:07:16.479 --> 00:07:20.831
We can just copy the code for shouting a message from this step down here for now

96
00:07:21.087 --> 00:07:24.415
We will deal with this judication but later

97
00:07:25.951 --> 00:07:29.023
That's from cucumber to chat we haven't made any mistakes

98
00:07:30.047 --> 00:07:30.815
Good

99
00:07:31.327 --> 00:07:35.167
Now we can use that same step everywhere else in the scenario to

100
00:07:43.103 --> 00:07:47.967
We can apply the same pain to remove the noisy incidental details from this next step 2

101
00:07:48.479 --> 00:07:50.271
What's the essence of this step

102
00:07:51.551 --> 00:07:54.623
And this case it really doesn't matter what showing at shouting

103
00:07:54.879 --> 00:07:59.231
Irregular shapes have any effect on his premium account credits

104
00:07:59.487 --> 00:08:01.535
So we could just rewind it like this

105
00:08:04.351 --> 00:08:10.495
Again will need a new Step definition that again will just duplicate the code for shouting a message for now

106
00:08:11.263 --> 00:08:13.823
Bull Run cucumber again just in case

107
00:08:14.847 --> 00:08:18.687
And finally that she's got new step every way we can

108
00:08:20.735 --> 00:08:23.039
And run cucumber once again

109
00:08:23.807 --> 00:08:25.343
Dallas deal with this next step

110
00:08:25.599 --> 00:08:27.135
What's the essence here

111
00:08:28.671 --> 00:08:33.023
All again the exact words in the shower don't have any significance in this scenario

112
00:08:33.279 --> 00:08:36.607
What message if anything is it this is a long message

113
00:08:36.863 --> 00:08:41.215
It's under a hundred 90 characters but still longer than a regular message

114
00:08:41.983 --> 00:08:44.799
It's not clear how important this distinction is just yet

115
00:08:45.311 --> 00:08:48.895
Let's give the office of the scenario the benefit of the doubt for now

116
00:08:49.407 --> 00:08:55.551
APUSH the details about the message content down into the step definition following the same recipe

117
00:08:59.135 --> 00:09:04.511
Again will tell her I'd duplication for now and just generate 290 card to message via

118
00:09:11.679 --> 00:09:13.727
Now what's interesting about this next step

119
00:09:15.007 --> 00:09:18.079
The shout is over a hundred 90 character limit

120
00:09:18.591 --> 00:09:23.967
After a quick chat with pull away concerned that she wants to call they send over long message

121
00:09:24.479 --> 00:09:29.855
That's update the real we wrote up earlier to document this Evolution about the main language

122
00:09:31.391 --> 00:09:34.463
Then we can use that to him in a new job start step

123
00:09:36.255 --> 00:09:37.279
Again

124
00:09:37.535 --> 00:09:40.863
Will make a step definition that duplicate two shots and code

125
00:09:41.119 --> 00:09:46.751
And this time make 191 karat to message just long enough to be out of the hundred 90 cartoon lemon

126
00:09:57.503 --> 00:09:58.271
Right

127
00:09:58.527 --> 00:10:04.671
With incidental details removed from the steps it's starting to become easier to see what's going on

128
00:10:05.439 --> 00:10:10.047
It would be even easier if a group them together let's do that

129
00:10:13.887 --> 00:10:20.031
So now we can clearly say that Sean shops three regular messages along message to over Longmire

130
00:10:20.287 --> 00:10:23.359
Messages and three messages containing the word by

131
00:10:23.871 --> 00:10:28.735
It's still a lot to digest but it clear picture is starting to emerge

132
00:10:29.759 --> 00:10:33.343
Are there any other incidental details remaining in this scenario

133
00:10:35.135 --> 00:10:41.279
Arguably the steps to create regular and long messages are incidental since they have no bearing on the back

134
00:10:41.535 --> 00:10:43.327
Hey you were describing with this scenario

135
00:10:43.839 --> 00:10:48.959
We can remove them all together on the behavior should be exactly the same so let's do that

136
00:10:50.495 --> 00:10:51.775
That's better

137
00:10:52.287 --> 00:10:58.431
That was removed all the incidental detail it's much easier to see how the figure of 11 credits has been calc

138
00:10:58.687 --> 00:10:59.199
Connected

139
00:10:59.711 --> 00:11:05.855
2 / long messages it to credits the message and three messages contained it would buy at 5

140
00:11:06.111 --> 00:11:09.183
Sh exit 19 credits

141
00:11:09.439 --> 00:11:12.767
Which subtracted from the initial 30 makes 11

142
00:11:14.047 --> 00:11:16.095
But we can make this even clearer

143
00:11:17.119 --> 00:11:23.263
These repetitive steps are necessary they make the scenario look more like a computer program in a specific a

144
00:11:23.519 --> 00:11:25.055
Patient document

145
00:11:25.311 --> 00:11:30.687
Instead of repeating this step when showing shouts and over long message over and over again

146
00:11:31.711 --> 00:11:33.503
Let's just tell it like it is

147
00:11:35.807 --> 00:11:38.111
Will need a new Step definition for this one

148
00:11:39.647 --> 00:11:43.743
The implementation of the step definition is almost exactly the same as the one below

149
00:11:43.999 --> 00:11:48.863
We just need to run a loop around it based on the number specified in the scenario

150
00:11:50.143 --> 00:11:56.287
Again will just suffer the duplication for the time being we have a nice trip bus leaves to get rid of all of it when the time comes

151
00:11:58.335 --> 00:12:01.407
Text you the exact same thing with these other three steps

152
00:12:04.479 --> 00:12:07.295
Again we have the bulk of this code

153
00:12:07.551 --> 00:12:11.391
So we can just copy and paste having a loop around the outside

154
00:12:19.583 --> 00:12:23.423
Nice now things are really getting Clara

155
00:12:23.935 --> 00:12:26.751
There is still a couple of problems with this scenario

156
00:12:27.263 --> 00:12:29.823
What is the name of the scenario

157
00:12:30.079 --> 00:12:32.383
It really doesn't tell us anything at all

158
00:12:33.663 --> 00:12:39.807
A great way to name your scenarios is to think about how they named episodes of the TV sitcom series

159
00:12:40.063 --> 00:12:40.831
Friends

160
00:12:41.087 --> 00:12:42.111
Fernanda

161
00:12:43.391 --> 00:12:45.183
Hello called something light

162
00:12:45.439 --> 00:12:50.047
The one where Ross is fine or the one where Phoebe gets married

163
00:12:51.839 --> 00:12:53.631
This is the one way

164
00:12:54.399 --> 00:13:00.543
The Walton Way she won't shout some of them messages and some containing the word by

165
00:13:02.079 --> 00:13:05.151
Quite complicated name isn't it

166
00:13:05.663 --> 00:13:08.223
Maybe this scenario is doing too much

167
00:13:08.735 --> 00:13:10.527
And that's the second problem

168
00:13:11.039 --> 00:13:15.391
It's trying to test both business rules at once

169
00:13:18.207 --> 00:13:24.351
Normally it wants at least one scenario for each business rule that way each scenario clearly illustrate

170
00:13:24.607 --> 00:13:26.399
Most effective that rule on the system

171
00:13:27.423 --> 00:13:33.567
Sometimes it's interesting to also document the effect that multiple rules have when they play out of the same time

172
00:13:34.335 --> 00:13:37.919
As you've already experienced that can quickly get confusing

173
00:13:39.455 --> 00:13:42.783
Sometimes you'll need several scenarios to illustrate just one rule

174
00:13:43.295 --> 00:13:47.647
And this case one scenario for each row looks like it will be fine for the time being

175
00:13:48.415 --> 00:13:50.207
Best medicine I went to

176
00:13:50.719 --> 00:13:56.863
The one where showing shot several over long messages and the one-way showing shot several messages

177
00:13:57.119 --> 00:13:58.399
Is containing the word by

178
00:14:05.055 --> 00:14:05.823
Great

179
00:14:06.335 --> 00:14:10.431
Now the effect of each of these rules is much more clearly documented

180
00:14:11.711 --> 00:14:15.807
We run these new Sanaya spola and she's delighted

181
00:14:16.319 --> 00:14:18.111
She really likes how they read

182
00:14:18.367 --> 00:14:19.647
She asks us

183
00:14:19.903 --> 00:14:22.463
Why do we still need the original scenario

184
00:14:23.487 --> 00:14:28.863
Comes in chimes in and says she has a concern the rules might conflict with each other in the code somehow

185
00:14:29.631 --> 00:14:33.983
As we talked about it we realized why we don't need this one anymore

186
00:14:34.495 --> 00:14:36.287
Does a missing scenario

187
00:14:36.543 --> 00:14:40.127
With those rules apply to the same message

188
00:14:40.639 --> 00:14:45.503
The one where there's a shop that supposed / long and with the word buying it

189
00:14:47.295 --> 00:14:49.855
We got the document that is a question for now

190
00:14:54.207 --> 00:14:56.767
Why we have polar and Tums attention

191
00:14:57.023 --> 00:15:00.863
Ask a question we know often helps to discover missing cenarios

192
00:15:02.143 --> 00:15:03.935
Is there another context

193
00:15:04.191 --> 00:15:06.751
That would result in a different outcome here

194
00:15:09.311 --> 00:15:10.847
They both think about this

195
00:15:11.359 --> 00:15:16.991
Hamilton suggest starting showing out with fear credits will shopping lots more messages

196
00:15:17.247 --> 00:15:19.039
So then he runs out to credit

197
00:15:19.551 --> 00:15:20.831
What would happen then

198
00:15:22.111 --> 00:15:23.391
Good question

199
00:15:23.647 --> 00:15:26.975
It looks like there's more to this feature than we previously thought

200
00:15:27.487 --> 00:15:29.791
The right up down is a question 2

201
00:15:30.047 --> 00:15:31.839
We still have a book to fix

202
00:15:34.399 --> 00:15:36.959
Well that's been quite a session

203
00:15:37.471 --> 00:15:41.823
We came in to fix one bug and ended up having to fix a feature file first

204
00:15:42.079 --> 00:15:44.127
We're still not done with that either

205
00:15:44.639 --> 00:15:50.783
By pushing the incidental details down out of the scenario into the step definitions with might a message to pique

206
00:15:51.039 --> 00:15:52.319
Step definitions

207
00:15:52.831 --> 00:15:54.367
Does it need fixed for that

208
00:15:54.623 --> 00:15:56.671
I will have to save that for next time

209
00:15:57.439 --> 00:15:59.231
Let's reflect on what we learned

210
00:16:01.023 --> 00:16:03.839
Which scenario is a very heavy in detail

211
00:16:04.095 --> 00:16:06.143
They can be confusing to read

212
00:16:06.655 --> 00:16:12.799
Weekly's incidental details when they're just noise at the tracks from communicating the essence

213
00:16:13.055 --> 00:16:14.079
Office scenario

214
00:16:15.359 --> 00:16:21.503
Cenarios that's a heavy in detail I sometimes said to be written in an imperative Style

215
00:16:22.271 --> 00:16:24.063
They contain lots of how

216
00:16:24.575 --> 00:16:26.367
Not much what

217
00:16:27.135 --> 00:16:33.023
We often use the style when working on a brand new two main problem still grasping for an understanding

218
00:16:33.535 --> 00:16:35.583
We just want to write something down

219
00:16:36.863 --> 00:16:39.423
Audio conferencing at the minoan improves

220
00:16:39.679 --> 00:16:42.751
Expect to feel comfortable removing some of these details

221
00:16:43.263 --> 00:16:49.407
Scenarios with more abstract steps like this I said to be written in a declarative

222
00:16:49.663 --> 00:16:50.175
Dial

223
00:16:50.943 --> 00:16:55.295
Using about the car to start remind me I need to find names for things

224
00:16:55.551 --> 00:16:58.879
By the way we had to name over long message

225
00:17:00.927 --> 00:17:07.071
This discovery if you're ubiquitous the main language is a great side effect of distilling the essence of your smile

226
00:17:08.095 --> 00:17:12.703
Now you have a bigger vocabulary that you can use all the way down to your code

227
00:17:12.959 --> 00:17:15.007
I'm in your future conversations to

228
00:17:16.799 --> 00:17:19.103
One downside is you seen

229
00:17:19.359 --> 00:17:23.455
Pushing the house down from your scenario is into the step definitions

230
00:17:23.711 --> 00:17:26.527
Is that the step definition code becomes more complex

231
00:17:27.039 --> 00:17:33.183
Sometimes reject this I prefer to use a simple vocabulary step definition of Leaving Mobile Detailing

232
00:17:33.439 --> 00:17:34.207
Cenarios

233
00:17:34.975 --> 00:17:41.119
There are no right and wrong answers here but if you have sufficient competence with code easily be able to

234
00:17:41.375 --> 00:17:47.263
Extra bit of complexity keep readability top of your priority list

235
00:17:48.031 --> 00:17:50.079
That's what will work on next time

236
00:17:50.591 --> 00:17:51.871
Bye for now
