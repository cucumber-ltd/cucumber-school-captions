WEBVTT

1
00:00:14.080 --> 00:00:16.640
Hi there welcome back to cucumber School

2
00:00:17.152 --> 00:00:23.296
In the last lesson we took a break from the code to sharpen up your skills with cucumbers command line interface

3
00:00:23.552 --> 00:00:29.696
Now it's time to die right back into the code we going to explore one of the hottest topics that teams come across when they

4
00:00:29.952 --> 00:00:32.256
Stop to get to grips with cucumber and bdd

5
00:00:32.768 --> 00:00:36.096
How much detail to use in your scenarios

6
00:00:36.864 --> 00:00:39.424
Many teams find it easily agree on this

7
00:00:39.936 --> 00:00:42.752
I can often seem like a matter of personal preference

8
00:00:43.264 --> 00:00:49.408
Is true there are no right and wrong answers but we going to teach you some principles that you can apply to help you make

9
00:00:49.664 --> 00:00:50.944
Make better decisions

10
00:00:52.480 --> 00:00:56.832
Once again while we were away the developers of shouty of been busy

11
00:00:57.344 --> 00:01:03.488
I knew Hotshot ninja Rockstar subcontractor Stevie has built a new feature called

12
00:01:03.744 --> 00:01:07.072
Premium Accounts we don't know much about it yet

13
00:01:07.328 --> 00:01:11.168
Tessa Thompson has reported a bug from manual testing

14
00:01:11.424 --> 00:01:13.216
And it's up to us to fix it

15
00:01:14.240 --> 00:01:18.336
Samsung is helpfully documented the bug has a failing scenario

16
00:01:18.848 --> 00:01:20.128
Heritage

17
00:01:23.712 --> 00:01:28.320
So let's try and figure out what this is all about

18
00:01:28.832 --> 00:01:34.720
Sean starts out with some credits presumably that's what gives him premium status

19
00:01:34.976 --> 00:01:39.840
As a result of that shout he's obviously supposed to have some credits deducted

20
00:01:40.352 --> 00:01:46.496
Thomson scenario says that the correct Behavior stuff for 5 credits to be deducted

21
00:01:46.752 --> 00:01:52.896
Leaving him with 25 credits as we can see from running the test the system is deducting

22
00:01:53.152 --> 00:01:54.432
15 credits instead

23
00:01:54.944 --> 00:01:56.992
I wonder why

24
00:01:58.272 --> 00:02:02.880
Misread the whole feature that should tell us some more about how the system is supposed to behave

25
00:02:04.672 --> 00:02:05.952
Oh my

26
00:02:06.208 --> 00:02:08.256
This is very difficult to read

27
00:02:09.280 --> 00:02:15.424
Sometimes it's bug report scenario at the bottom there's only one scenario and it's long

28
00:02:16.192 --> 00:02:17.472
I think I can count

29
00:02:17.728 --> 00:02:21.312
Twelve steps altogether excluding the background steps

30
00:02:21.824 --> 00:02:24.384
The scenario several when steps

31
00:02:24.896 --> 00:02:30.016
Which is often a sign that the scenario was trying to test more than one business rule is a Time

32
00:02:31.296 --> 00:02:35.392
We normally like to document the business rules at the top of the feature file

33
00:02:35.904 --> 00:02:40.256
That description sections left blank so haven't been left any clues that

34
00:02:41.280 --> 00:02:44.352
Let's see if we can clean the rules from the scenario

35
00:02:45.632 --> 00:02:49.984
Sean starts out with 30 credits and ends up with 11

36
00:02:50.496 --> 00:02:51.520
But why

37
00:02:52.800 --> 00:02:54.848
A summers detail here

38
00:02:55.104 --> 00:02:57.152
I wonder which dates are important

39
00:02:58.176 --> 00:03:03.552
Could it be the number of word shouts it affect his credit or the number of messages

40
00:03:04.576 --> 00:03:09.696
I sometimes in Teske's maybe that would buy is important it's really hard to tell

41
00:03:10.720 --> 00:03:14.048
It's interesting that Lucy has all Sean's messages

42
00:03:14.304 --> 00:03:19.168
Even these ones which looked to be over a hundred 90 characters I would normally be blocked

43
00:03:20.192 --> 00:03:26.080
Premium Accounts get to send messages over a hundred Knights characters in exchange for credits

44
00:03:27.104 --> 00:03:27.872
Well

45
00:03:28.896 --> 00:03:32.224
The face is pretty useless as documentation of the behavior

46
00:03:33.504 --> 00:03:35.040
It's no wonder there's a bug

47
00:03:35.296 --> 00:03:41.440
If this feature file reflectix teams current understanding of Premium Accounts Behavior I don't understand

48
00:03:41.696 --> 00:03:42.208
Well

49
00:03:44.256 --> 00:03:46.304
Let's try reading the code instead

50
00:03:48.352 --> 00:03:54.496
Okay so we have a deduct credits method here that seems to encapsulate the rules

51
00:03:55.264 --> 00:03:59.872
It looks like over long messages messages that are not short enough

52
00:04:00.384 --> 00:04:02.432
Cost to credits

53
00:04:02.688 --> 00:04:06.784
Needs time to advise mention we deduct 5 credits

54
00:04:07.296 --> 00:04:09.600
What's a good job we know how to read code

55
00:04:10.880 --> 00:04:17.024
What are the promises of payday is that a feature files become the single source of Truth for the whole team

56
00:04:17.280 --> 00:04:23.423
Yet here the scenario just such a poor job of documenting what the system does we have to go hunting for the

57
00:04:23.679 --> 00:04:24.959
Chase in the code

58
00:04:25.215 --> 00:04:31.359
That's fine for us because we know how to read code but it's excluded anyone on our team

59
00:04:31.615 --> 00:04:32.639
It was a technical

60
00:04:33.151 --> 00:04:37.247
How would they be able to understand the behavior of Premium Accounts at the moment

61
00:04:38.527 --> 00:04:40.319
We need to fix this feature file

62
00:04:41.087 --> 00:04:45.695
It seems like a good time to ask out the main Express or clarification about this Behavior

63
00:04:46.463 --> 00:04:49.535
Idalia Three Amigos meeting would have done this already

64
00:04:50.047 --> 00:04:52.607
The things don't always go according to the script

65
00:04:53.119 --> 00:04:55.167
That's a visit to a product owner

66
00:04:56.959 --> 00:05:01.055
Pulling the product and it tells us the rules are as follows

67
00:05:01.823 --> 00:05:05.663
Mention the word by when you lose 5 credits

68
00:05:06.431 --> 00:05:09.503
Long messages cost to credits

69
00:05:10.271 --> 00:05:12.063
Okay well I hope this is a great deal

70
00:05:12.575 --> 00:05:16.415
But it said I was still doing a poor job of illustrating those rules

71
00:05:17.183 --> 00:05:19.743
The second moment to understand why

72
00:05:23.327 --> 00:05:26.399
It's all about the details

73
00:05:26.655 --> 00:05:29.471
When you first exploring a new Domaine problem

74
00:05:29.727 --> 00:05:35.871
Details like the exact messages people of shouted are a great way to shine light into

75
00:05:36.127 --> 00:05:38.431
The dark corners of your ignorance

76
00:05:38.943 --> 00:05:42.783
I bring examples to lie by making them Vivid and real

77
00:05:43.807 --> 00:05:47.903
This encourages what creative people call Divergent thinking

78
00:05:48.159 --> 00:05:51.231
Which helps you discover even more examples

79
00:05:51.743 --> 00:05:54.815
As you explore the behavior you need to provide

80
00:05:55.839 --> 00:05:59.935
In DDD we call this deliberate discovery

81
00:06:00.191 --> 00:06:04.031
Let me try to explore the problem to mine as thoroughly as we can

82
00:06:04.799 --> 00:06:07.103
Details are good here

83
00:06:08.639 --> 00:06:10.175
At some point however

84
00:06:10.431 --> 00:06:12.479
We need to write a computer program

85
00:06:12.991 --> 00:06:17.599
Enough time comes we need to switch to convergent thinking

86
00:06:17.855 --> 00:06:23.999
I try to distill down all that detail into something that clearly communicates the essence

87
00:06:24.255 --> 00:06:25.279
Of the behavior

88
00:06:26.303 --> 00:06:32.191
Now too much detail can be distracting or misleading to our future readers

89
00:06:32.959 --> 00:06:36.543
We call these incidental details

90
00:06:38.847 --> 00:06:44.991
Let's try to distill the essence of this scenario by removing the incidental details

91
00:06:46.015 --> 00:06:51.391
We can start with this step when shown shouts come and buy a coffee

92
00:06:52.671 --> 00:06:56.767
What's important here is that the shout contains the word Buy

93
00:06:57.279 --> 00:06:59.071
So let's write that

94
00:07:00.863 --> 00:07:01.887
Better

95
00:07:02.399 --> 00:07:07.775
We still have a little bit of detail the word vie that's quite important

96
00:07:08.031 --> 00:07:11.103
I thought it helps to illustrate how business rule

97
00:07:12.639 --> 00:07:15.711
Will need a new Step definition for this of course

98
00:07:17.503 --> 00:07:21.855
We can just copy the code for shouting a message from this step down here for now

99
00:07:22.367 --> 00:07:25.695
We will deal with this judication but later

100
00:07:27.231 --> 00:07:30.303
That's from cucumber to chat we haven't made any mistakes

101
00:07:31.071 --> 00:07:32.095
Good

102
00:07:32.607 --> 00:07:36.191
Now we can use that same step everywhere else in the scenario to

103
00:07:44.127 --> 00:07:48.991
We can apply the same pain to remove the noisy incidental details from this next step 2

104
00:07:49.503 --> 00:07:51.295
What's the essence of this step

105
00:07:52.575 --> 00:07:55.647
And this case it really doesn't matter what showing at shouting

106
00:07:55.903 --> 00:08:00.255
A regular shop doesn't have any effect on his premium account credits

107
00:08:00.511 --> 00:08:02.559
So we could just rewind it like this

108
00:08:05.375 --> 00:08:11.519
Again will need a new Step definition on again will just duplicate the code for shouting a message from now

109
00:08:14.335 --> 00:08:16.895
Bull Run cucumber again just in case

110
00:08:17.919 --> 00:08:21.759
And finally that she's got new step every way we can

111
00:08:23.807 --> 00:08:26.111
And run cucumber once again

112
00:08:27.903 --> 00:08:31.487
Dallas deal with this next step what's the essence here

113
00:08:32.767 --> 00:08:37.375
All again the exact words in the shower don't have any significance in this scenario

114
00:08:37.631 --> 00:08:40.703
What message if anything is it this is a long message

115
00:08:40.959 --> 00:08:45.567
It's under a hundred eighty characters but still longer than a regular message

116
00:08:46.079 --> 00:08:49.151
It's not clear how important this distinction is just yet

117
00:08:49.663 --> 00:08:52.991
Let's give the oldest of the scenario the benefit of the doubt for now

118
00:08:53.503 --> 00:08:59.647
APUSH the details about the message content down into the step definition following the same recipe

119
00:09:07.583 --> 00:09:12.959
Again will tolerate the duplication for now and just generate 290 card to message via

120
00:09:18.079 --> 00:09:20.383
Now what's interesting about this next step

121
00:09:21.407 --> 00:09:24.479
The shout is over a hundred 90 character limit

122
00:09:24.991 --> 00:09:30.623
After a quick chat with pull away concerned that she wants to call they send over long message

123
00:09:31.135 --> 00:09:36.255
That's update the real we wrote up there earlier to document this Evolution about the main language

124
00:09:37.791 --> 00:09:41.119
Then we can use that to him in a new mob start step

125
00:09:42.655 --> 00:09:43.679
Again

126
00:09:43.935 --> 00:09:47.263
Will make a step definition that duplicate the chassis code

127
00:09:47.519 --> 00:09:53.151
And this time make a hundred ninety one card to message just long enough to be over the under 90 cartoon

128
00:10:02.367 --> 00:10:03.135
Right

129
00:10:03.391 --> 00:10:09.535
The incidental details removed from the steps it's starting to become easier to see what's going on

130
00:10:10.303 --> 00:10:14.911
It would be even easier if a group them together let's do that

131
00:10:16.703 --> 00:10:22.847
So now we can clearly say that showing shops three regular messages along message to over along my

132
00:10:23.103 --> 00:10:26.175
Messages and three messages containing the word by

133
00:10:26.687 --> 00:10:31.551
It's still a lot to digest but it clear picture is starting to emerge

134
00:10:32.831 --> 00:10:36.159
Are there any other incidental details remaining in this scenario

135
00:10:37.439 --> 00:10:43.583
I'll give the the steps to create a regular and long messages out incidental since they have no bearing on the back

136
00:10:43.839 --> 00:10:45.631
Baby with describing with a scenario

137
00:10:46.143 --> 00:10:51.263
We can remove them all together on the behavior should be exactly the same so let's do that

138
00:10:52.799 --> 00:10:53.823
That's better

139
00:10:54.591 --> 00:11:00.735
That was removed all the incidental detail it's much easier to see how the figure of 11 credits is Ben kalka

140
00:11:00.991 --> 00:11:01.503
Connected

141
00:11:02.015 --> 00:11:04.831
2 / long messages it to credits the message

142
00:11:05.087 --> 00:11:11.231
And three messages containing the word by at 5 credits each exit 19 credits

143
00:11:11.487 --> 00:11:15.071
Which subtracted from the initial 30 makes 11

144
00:11:15.583 --> 00:11:17.631
But we can make this even clearer

145
00:11:18.655 --> 00:11:24.799
These repetitive steps are necessary they make the scenario look more like a computer program in the

146
00:11:25.055 --> 00:11:26.591
Document

147
00:11:26.847 --> 00:11:32.223
Instead of repeating this step when Sean shouts and over long message over and over again

148
00:11:33.247 --> 00:11:35.039
Let's just tell it like it is

149
00:11:37.087 --> 00:11:39.647
Will need a new Step definition for this phone

150
00:11:40.927 --> 00:11:45.279
The implementation of the step definition is almost exactly the same as the one below

151
00:11:45.535 --> 00:11:50.399
We just need to run a loop around it based on the number specified in the scenario

152
00:11:51.679 --> 00:11:57.823
Again will just suffer the duplication for the time being we have a nice trick of us leaves to get rid of all of it when the time comes

153
00:11:59.871 --> 00:12:02.687
Text you the exact same thing with these other three steps

154
00:12:12.671 --> 00:12:13.439
Again

155
00:12:13.695 --> 00:12:15.487
This code

156
00:12:15.743 --> 00:12:19.583
So we can just copy and paste having a loop around the outside

157
00:12:27.775 --> 00:12:31.615
Nice now things are really guessing Clara

158
00:12:32.383 --> 00:12:34.943
There are still a couple of problems with this scenario

159
00:12:35.711 --> 00:12:38.015
What is the name of the scenario

160
00:12:38.527 --> 00:12:40.831
It really doesn't tell us anything at all

161
00:12:42.111 --> 00:12:48.255
A great way to name your scenarios is to think about how they named episodes of the TV sitcom series

162
00:12:48.511 --> 00:12:49.023
Friends

163
00:12:49.535 --> 00:12:50.303
Remember

164
00:12:51.583 --> 00:12:53.375
Hello called something light

165
00:12:53.631 --> 00:12:58.495
The one where Ross is fine or the one where Phoebe gets married

166
00:13:00.031 --> 00:13:02.079
This is the one way

167
00:13:02.591 --> 00:13:08.735
The one way out some messages and some containing the word

168
00:13:10.271 --> 00:13:13.343
Quite complicated name isn't it

169
00:13:13.855 --> 00:13:16.415
Maybe this scenario is doing too much

170
00:13:17.183 --> 00:13:18.719
And that's the second problem

171
00:13:19.487 --> 00:13:23.583
It's trying to test both business rules at once

172
00:13:23.839 --> 00:13:27.423
Normally it wants at least one scenario for each business rule

173
00:13:27.679 --> 00:13:32.287
That way each scenario clearly illustrates the effect to that rule on the system

174
00:13:33.055 --> 00:13:39.199
Sometimes it's interesting to also document the effect that multiple rules have when they play out of the same time

175
00:13:40.223 --> 00:13:43.807
As you've already experienced that can quickly get confusing

176
00:13:45.343 --> 00:13:48.671
Sometimes you'll need several scenarios to illustrate just one rule

177
00:13:49.183 --> 00:13:53.535
And this case scenario for each row looks like it will be fine for the time being

178
00:13:54.047 --> 00:13:55.839
Let's put this and I went to

179
00:13:56.607 --> 00:13:59.423
The one where showing shot several over long messages

180
00:14:01.471 --> 00:14:06.079
And the one way showing shot several messages containing the word by

181
00:14:07.615 --> 00:14:08.639
Crate

182
00:14:09.151 --> 00:14:13.247
Now the effect of each of these rules is much more clearly documented

183
00:14:13.759 --> 00:14:17.599
We run these new saniya spoiler and she's delighted

184
00:14:18.111 --> 00:14:19.903
She really likes how they read

185
00:14:20.159 --> 00:14:21.439
She asks us

186
00:14:21.695 --> 00:14:24.255
Why do we still need the original scenario

187
00:14:25.535 --> 00:14:30.911
Comes in chimes in and says she has a concern the rules my conflicted each other in the code somehow

188
00:14:31.423 --> 00:14:35.775
As we talked about it we realized why we don't need this one anymore

189
00:14:36.287 --> 00:14:38.079
There's a missing scenario

190
00:14:38.335 --> 00:14:41.919
With those rules apply to the same message

191
00:14:42.431 --> 00:14:45.247
The one where there's a shop that supposed over long

192
00:14:45.503 --> 00:14:47.295
And with the word buying it

193
00:14:49.087 --> 00:14:51.647
The best document that is a question for now

194
00:14:52.415 --> 00:14:58.559
Why we have polar and Tums is attention we ask a question we know often helps to discover missing scenario

195
00:15:00.351 --> 00:15:04.959
Is there another context that would result in a different outcome here

196
00:15:07.519 --> 00:15:09.055
They both think about this

197
00:15:09.567 --> 00:15:15.455
Hamilton suggest starting showing out with fear credits will shopping lots more messages

198
00:15:15.711 --> 00:15:17.247
So then he runs out to credit

199
00:15:17.759 --> 00:15:19.295
What would happen then

200
00:15:20.319 --> 00:15:21.599
Good question

201
00:15:22.111 --> 00:15:25.183
It looks like there's more to this feature than we previously thought

202
00:15:25.695 --> 00:15:27.999
The right up down is a question 2

203
00:15:28.255 --> 00:15:30.047
We still have a book to fix

204
00:15:34.911 --> 00:15:37.471
Well that's been quite a session

205
00:15:37.983 --> 00:15:42.335
We came in to fix one bug and ended up having to fix a feature file first

206
00:15:42.591 --> 00:15:44.383
We're still not done with that either

207
00:15:45.151 --> 00:15:51.295
By pushing the incidental details down out of the scenario into the step definitions with might a message to pique

208
00:15:51.551 --> 00:15:52.831
Step definitions

209
00:15:53.343 --> 00:15:54.879
Does it need fix for that

210
00:15:55.135 --> 00:15:57.183
I will have to save that for next time

211
00:15:57.951 --> 00:15:59.743
Let's reflect on what we learned

212
00:16:01.535 --> 00:16:04.351
What scenario is a very heavy in detail

213
00:16:04.607 --> 00:16:06.655
They can be confusing to read

214
00:16:07.167 --> 00:16:13.311
We call these incidental details when I just noise at the tracks from communicating the essence

215
00:16:13.567 --> 00:16:14.591
Office scenario

216
00:16:15.615 --> 00:16:21.759
Cenarios that's a heavy in detail I sometimes said to be written in an imperative Style

217
00:16:22.783 --> 00:16:24.575
They contain lots of how

218
00:16:24.831 --> 00:16:26.879
Not much what

219
00:16:27.647 --> 00:16:33.535
We often use this style problem still grasping for an understanding

220
00:16:34.047 --> 00:16:36.095
We just want to write something down

221
00:16:37.119 --> 00:16:43.263
Audio conferencing add to my knowledge improves it expect to feel comfortable removing some of these details

222
00:16:43.775 --> 00:16:49.919
Scenarios with more abstract steps like this I said to be written in a declarative Style

223
00:16:51.455 --> 00:16:55.807
Using a motor car to stop me I need to find names for things

224
00:16:56.063 --> 00:16:59.391
By the way we had to name over long message

225
00:17:01.439 --> 00:17:07.583
Is discover if you're ubiquitous the main language is a great side effect of distilling the essence of your scenarios

226
00:17:08.607 --> 00:17:12.959
Now you have a bigger vocabulary that you can use all the way down to your code

227
00:17:13.215 --> 00:17:15.519
I'm in your future conversations to

228
00:17:17.311 --> 00:17:19.359
One downside is you seen

229
00:17:19.871 --> 00:17:26.015
Pushing the house down from your scenario is into the step definitions is that the step definition code becomes

230
00:17:26.271 --> 00:17:27.039
Complex

231
00:17:27.295 --> 00:17:33.439
Sometimes reject this I prefer to use a simple vocabulary list of definitions Leaving Mobile Detailing

232
00:17:33.695 --> 00:17:34.719
Cenarios

233
00:17:35.487 --> 00:17:41.631
There are no right and wrong answers here but if you have sufficient competence with code you'll easily be able to

234
00:17:41.887 --> 00:17:47.775
Extra bit of complexity keep readability top of your priority list

235
00:17:48.543 --> 00:17:50.335
That's what will work on next time

236
00:17:51.103 --> 00:17:52.383
Bye for now
